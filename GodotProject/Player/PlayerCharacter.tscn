[gd_scene format=3 uid="uid://dl2g3ks3fn2fa"]

[ext_resource type="Script" uid="uid://dunip1f0c6d0p" path="res://Player/PlayerCharacter.gd" id="1_k87gr"]
[ext_resource type="Script" uid="uid://bj4limi67x1lj" path="res://Character/Abilities/Ability_DiveDodgeroll.gd" id="2_1gtpu"]
[ext_resource type="Script" uid="uid://bodf7ykpt3nvj" path="res://Character/HealthHandler.gd" id="2_jdwmw"]
[ext_resource type="Script" uid="uid://cwnau2ggxef6s" path="res://Player/CameraController_ThirdPerson.gd" id="2_k87gr"]
[ext_resource type="Script" uid="uid://b88d4812atpa2" path="res://Character/Abilities/AbilityHandler.gd" id="2_pxyys"]
[ext_resource type="Script" uid="uid://n0npfcrtb22q" path="res://Player/PlayerInput.gd" id="3_gnsy3"]
[ext_resource type="Script" uid="uid://hmip4a5fhm63" path="res://Character/Abilities/Ability_Slash.gd" id="4_05ndu"]
[ext_resource type="PackedScene" uid="uid://c6i8efdjgfyg2" path="res://Art/Models/Guy/hoodguy - animations.blend" id="8_ix2we"]
[ext_resource type="Material" uid="uid://cx2eo1b8m321u" path="res://Art/Shaders/film_grain_mat.tres" id="8_nn7gb"]
[ext_resource type="PackedScene" uid="uid://b5jkvjlnigbkh" path="res://UI/player_ui.tscn" id="9_6f781"]
[ext_resource type="Texture2D" uid="uid://otxunksev03c" path="res://UI/HUD/stamina_bar_icon_background.png" id="10_3tt8b"]
[ext_resource type="Script" uid="uid://gpt43iqvuyvc" path="res://UI/player_UI.gd" id="10_gjyvj"]
[ext_resource type="Shader" uid="uid://71dktl3vipck" path="res://UI/HUD/ui_flipbook.gdshader" id="10_x7hbx"]
[ext_resource type="Texture2D" uid="uid://cgx2ceevxsbft" path="res://UI/HUD/stamina_background.png" id="11_8llf3"]
[ext_resource type="Material" uid="uid://x40eqxuw763m" path="res://Art/Models/Guy/RECOLOR - hoodguy_mat.tres" id="11_bipy8"]
[ext_resource type="Texture2D" uid="uid://btvqxy6trve2" path="res://Art/Sprites/boot.png" id="11_gjyvj"]
[ext_resource type="Texture2D" uid="uid://b8u473vnyajit" path="res://UI/HUD/stamina_bar.png" id="12_8llf3"]
[ext_resource type="Texture2D" uid="uid://c156q3xe2lary" path="res://Art/Sprites/sword.png" id="15_grsr8"]
[ext_resource type="Shader" uid="uid://fhkklqam3ard" path="res://UI/HUD/ui_progress_linear.gdshader" id="17_0ykgn"]
[ext_resource type="Texture2D" uid="uid://xno8nsn3k81b" path="res://UI/HUD/attack_cooldown.png" id="18_8v6cl"]
[ext_resource type="Script" uid="uid://dqtuua2dud3id" path="res://UI/HUD/ui_attack_cooldown.gd" id="19_8v6cl"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_pxyys"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5cwa8"]
radius = 0.4
height = 1.8

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ix2we"]
transparency = 2
alpha_scissor_threshold = 0.5
alpha_antialiasing_mode = 0
albedo_color = Color(1, 1, 1, 0)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_a5bt4"]
material = SubResource("StandardMaterial3D_ix2we")
radius = 0.4
height = 1.8

[sub_resource type="BoxMesh" id="BoxMesh_jdwmw"]
size = Vector3(0.8, 0.25, 0.5)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ix2we"]
animation = &"Swing"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_ix2we"]
filter_enabled = true
filters = ["metarig/Skeleton3D:forearm.L", "metarig/Skeleton3D:forearm.R", "metarig/Skeleton3D:hand.L", "metarig/Skeleton3D:hand.R", "metarig/Skeleton3D:shoulder.L", "metarig/Skeleton3D:shoulder.R", "metarig/Skeleton3D:spine", "metarig/Skeleton3D:spine.001", "metarig/Skeleton3D:spine.002", "metarig/Skeleton3D:spine.003", "metarig/Skeleton3D:spine.004", "metarig/Skeleton3D:spine.005", "metarig/Skeleton3D:upper_arm.L", "metarig/Skeleton3D:upper_arm.R"]
fadein_time = 0.1
fadeout_time = 0.1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7n8pw"]
animation = &"Idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_xw56l"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gepu4"]
animation = &"Run"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_ix2we"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_os3p4"]
graph_offset = Vector2(-301.38788, 17.70763)
nodes/output/position = Vector2(576, 0)
nodes/Idle/node = SubResource("AnimationNodeAnimation_7n8pw")
nodes/Idle/position = Vector2(-128, 0)
nodes/Run/node = SubResource("AnimationNodeAnimation_gepu4")
nodes/Run/position = Vector2(-128, 240)
nodes/MovementBlend/node = SubResource("AnimationNodeBlend2_xw56l")
nodes/MovementBlend/position = Vector2(48, 48)
nodes/Attack/node = SubResource("AnimationNodeOneShot_ix2we")
nodes/Attack/position = Vector2(320, 48)
nodes/Animation/node = SubResource("AnimationNodeAnimation_ix2we")
nodes/Animation/position = Vector2(-64, 416)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_ix2we")
nodes/TimeScale/position = Vector2(128, 336)
node_connections = [&"output", 0, &"Attack", &"MovementBlend", 0, &"Idle", &"MovementBlend", 1, &"Run", &"Attack", 0, &"MovementBlend", &"Attack", 1, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_in3ap"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bipy8"]
animation = &"Run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gepu4"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_l8frs"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_xw56l"]
states/BlendTree/node = SubResource("AnimationNodeBlendTree_os3p4")
states/BlendTree/position = Vector2(364.80002, 120.600006)
states/Idle/node = SubResource("AnimationNodeAnimation_in3ap")
states/Idle/position = Vector2(478, 52.79999)
states/Run/node = SubResource("AnimationNodeAnimation_bipy8")
states/Run/position = Vector2(522.80005, 138.4)
transitions = ["Idle", "Run", SubResource("AnimationNodeStateMachineTransition_gepu4"), "Start", "BlendTree", SubResource("AnimationNodeStateMachineTransition_l8frs")]
graph_offset = Vector2(-80, -45)

[sub_resource type="Animation" id="Animation_05ndu"]
length = 0.001
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0, 1)

[sub_resource type="Animation" id="Animation_pxyys"]
resource_name = "dodgeroll"
length = 0.8
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, -0.17858297, 0, 0.10000001, 1, 0, 0, 0, 0.4, 1, 0, -0.17858297, 0, 0.5, 1, 0, 0, 0)
tracks/1/type = "rotation_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Pill")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, 0, 0, 1, 0.10000001, 1, 0.70710677, 0, 0, 0.70710677, 0.19999999, 1, 1, 0, 0, -4.371139e-08, 0.3, 1, -0.70710665, 0, 0, 0.7071069, 0.4, 1, 0, 0, 0, 1, 0.5, 1, 0.70710677, 0, 0, 0.70710677, 0.59999996, 1, 1, 0, 0, -4.371139e-08, 0.7, 1, -0.70710665, 0, 0, 0.7071069, 0.8, 1, -2.9802322e-08, 0, 0, 1)
tracks/2/type = "scale_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Pill")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, 1.2262135, 0.7728788, 1.1725531, 0.10000001, 1, 0.78571755, 1.197145, 0.75208104, 0.19999999, 1, 1, 1, 1, 0.4, 1, 1.2262135, 0.7728788, 1.1725531, 0.5, 1, 0.78571755, 1.197145, 0.75208104, 0.59999996, 1, 1, 1, 1)

[sub_resource type="Animation" id="Animation_gnsy3"]
resource_name = "dodgeroll_recover"
length = 0.5
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, -0.012981296, 0.06441715, 0.1, 1, 0, -0.14167124, 0.36900914, 0.5, 1, 0, 0, 0)
tracks/1/type = "rotation_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Pill")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0.13052613, 0, 0, 0.9914449, 0.1, 1, 0.38268343, 0, 0, 0.92387956, 0.5, 1, 0, 0, 0, 1)

[sub_resource type="Animation" id="Animation_nn7gb"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, -0.04366298, 0, 0, 0.9990463, 0.5, 1, 0.0485447, 0, 0, 0.99882096)

[sub_resource type="Animation" id="Animation_6f781"]
resource_name = "jump"
length = 0.4
tracks/0/type = "scale_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0.06666667, 1, 0.5644654, 1.615779, 0.5718456, 0.4, 1, 1, 1, 1)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Pill")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, -0.5207978, 0, 0.4, 1, 0, 0, 0)
tracks/2/type = "rotation_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Pill")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array()

[sub_resource type="Animation" id="Animation_jdwmw"]
resource_name = "land"
length = 0.5
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0, 0.1, 1, 0, -0.55312514, 0, 0.2, 1, 0, 0.32559502, 0, 0.33333334, 1, 0, 0, 0)
tracks/1/type = "scale_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Pill")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 1, 1, 1, 0.13333333, 1, 1.61, 0.4421207, 1.61, 0.23333333, 1, 0.6510279, 1.3916173, 0.63484174, 0.36666667, 1, 1, 1, 1)

[sub_resource type="Animation" id="Animation_ik8g8"]
resource_name = "walk"
loop_mode = 1
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pill")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, -0.042956788, 0.9990769, 0.5, 1, 0, 0, 0.044412713, 0.99901325)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Pill")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, 0, 0, 0.2, 1, -0.0018443142, 0.18109119, 0, 0.5, 1, 0, 0, 0, 0.7, 1, -0.0018443142, 0.18109119, 0)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_x7hbx"]
_data = {
&"RESET": SubResource("Animation_05ndu"),
&"dodgeroll": SubResource("Animation_pxyys"),
&"dodgeroll_recover": SubResource("Animation_gnsy3"),
&"idle": SubResource("Animation_nn7gb"),
&"jump": SubResource("Animation_6f781"),
&"land": SubResource("Animation_jdwmw"),
&"walk": SubResource("Animation_ik8g8")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gnsy3"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6f781"]
animation = &"idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_ik8g8"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_x7hbx"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_jdwmw"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_8llf3"]
graph_offset = Vector2(-544.4997, 154.98788)
nodes/Animation/node = SubResource("AnimationNodeAnimation_6f781")
nodes/Animation/position = Vector2(-60, 160)
nodes/WalkBlend/node = SubResource("AnimationNodeBlend2_ik8g8")
nodes/WalkBlend/position = Vector2(120, 140)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_gnsy3")
"nodes/Animation 2/position" = Vector2(-520, 380)
nodes/WalkSpeed/node = SubResource("AnimationNodeTimeScale_x7hbx")
nodes/WalkSpeed/position = Vector2(-60, 360)
nodes/_/node = SubResource("AnimationNodeTimeScale_jdwmw")
nodes/_/position = Vector2(-280, 380)
node_connections = [&"output", 0, &"WalkBlend", &"WalkBlend", 0, &"Animation", &"WalkBlend", 1, &"WalkSpeed", &"WalkSpeed", 0, &"_", &"_", 0, &"Animation 2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jdwmw"]
animation = &"RESET"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_05ndu"]
animation = &"dodgeroll"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pxyys"]
animation = &"dodgeroll_recover"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nn7gb"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ik8g8"]
animation = &"land"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_827r0"]
advance_mode = 2
advance_condition = &"Dodgeroll"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mv8iy"]
switch_mode = 2
advance_mode = 2
advance_condition = &"Grounded"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_grsr8"]
advance_mode = 2
advance_expression = "not get(\"parameters/conditions/Grounded\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0ykgn"]
advance_mode = 2
advance_expression = "not get(\"parameters/conditions/Grounded\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3tt8b"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gjyvj"]
advance_mode = 2
advance_expression = "not get(\"parameters/conditions/Grounded\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8v6cl"]
switch_mode = 2
advance_mode = 2
advance_condition = &"Grounded"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jdwmw"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_05ndu"]
advance_mode = 2
advance_condition = &"Dodgeroll"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3ypln"]
advance_mode = 2
advance_expression = "get(\"parameters/conditions/Grounded\") and not get(\"parameters/conditions/Dodgeroll\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x7hbx"]
switch_mode = 2
advance_mode = 2
advance_condition = &"Grounded"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8llf3"]
advance_mode = 2
advance_expression = "not get(\"parameters/conditions/Grounded\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gnsy3"]
advance_mode = 2
advance_condition = &"Dodgeroll"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_8v6cl"]
states/GroundedMovement/node = SubResource("AnimationNodeBlendTree_8llf3")
states/GroundedMovement/position = Vector2(428, 40)
states/RESET/node = SubResource("AnimationNodeAnimation_jdwmw")
states/RESET/position = Vector2(608, 174)
states/dodgeroll/node = SubResource("AnimationNodeAnimation_05ndu")
states/dodgeroll/position = Vector2(766, -34)
states/dodgeroll_recover/node = SubResource("AnimationNodeAnimation_pxyys")
states/dodgeroll_recover/position = Vector2(766, 174)
states/jump/node = SubResource("AnimationNodeAnimation_nn7gb")
states/jump/position = Vector2(608, 40)
states/land/node = SubResource("AnimationNodeAnimation_ik8g8")
states/land/position = Vector2(428, 174)
transitions = ["RESET", "dodgeroll", SubResource("AnimationNodeStateMachineTransition_827r0"), "dodgeroll", "dodgeroll_recover", SubResource("AnimationNodeStateMachineTransition_mv8iy"), "dodgeroll", "jump", SubResource("AnimationNodeStateMachineTransition_grsr8"), "dodgeroll_recover", "jump", SubResource("AnimationNodeStateMachineTransition_0ykgn"), "Start", "GroundedMovement", SubResource("AnimationNodeStateMachineTransition_3tt8b"), "GroundedMovement", "jump", SubResource("AnimationNodeStateMachineTransition_gjyvj"), "dodgeroll_recover", "GroundedMovement", SubResource("AnimationNodeStateMachineTransition_8v6cl"), "jump", "RESET", SubResource("AnimationNodeStateMachineTransition_jdwmw"), "jump", "dodgeroll", SubResource("AnimationNodeStateMachineTransition_05ndu"), "RESET", "land", SubResource("AnimationNodeStateMachineTransition_3ypln"), "land", "GroundedMovement", SubResource("AnimationNodeStateMachineTransition_x7hbx"), "land", "jump", SubResource("AnimationNodeStateMachineTransition_8llf3"), "GroundedMovement", "dodgeroll", SubResource("AnimationNodeStateMachineTransition_gnsy3")]
graph_offset = Vector2(2, -104)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_827r0"]
shader = ExtResource("10_x7hbx")
shader_parameter/Texture = ExtResource("11_8llf3")
shader_parameter/Tiles = Vector2i(4, 1)
shader_parameter/FPS = 2.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3ypln"]
shader = ExtResource("17_0ykgn")
shader_parameter/fill_alpha = 0.6170000293075
shader_parameter/grayed_multiplier = 0.125

[node name="CharacterController" type="CharacterBody3D" unique_id=764542603 node_paths=PackedStringArray("animation_tree", "model", "camera", "anim_tree") groups=["Player"]]
script = ExtResource("1_k87gr")
_control_enabled = true
animation_tree = NodePath("Visual/Pill/hoodguy - animations/AnimationTree")
move_speed = 10.0
acceleration = 100.0
deceleration = 100.0
deceleration_ledgeDetected = 120.0
running_slerp_airborne = true
runningSlerp_TurnRate = 8.0
jump_variable_enabled = false
jump_precharge = false
jump_force = 25.0
gravity_jumping = 70.0
gravity_falling = 20.0
gravity_wall_running = 15.0
gravity_wall_running_falling = 15.0
ATV_grounded = "parameters/conditions/Grounded"
ATV_jump_held = "parameters/conditions/Jump"
ATV_move_blend = "parameters/GroundedMovement/WalkBlend/blend_amount"
ATV_move_alpha = "parameters/GroundedMovement/WalkSpeed/scale"
model = NodePath("Visual/Pill")
camera = NodePath("Camera3DOverhead")
anim_tree = NodePath("Visual/AnimationTree")
metadata/_custom_type_script = "uid://dunip1f0c6d0p"

[node name="HealthHandler" type="Node" parent="." unique_id=1691669062]
script = ExtResource("2_jdwmw")
destroy_on_death = false
can_die = false
metadata/_custom_type_script = "uid://bodf7ykpt3nvj"

[node name="PlayerInput" type="Node" parent="." unique_id=1576840498]
script = ExtResource("3_gnsy3")
metadata/_custom_type_script = "uid://n0npfcrtb22q"

[node name="AbilityHandler" type="Node3D" parent="." unique_id=742486873]
script = ExtResource("2_pxyys")
stamina_regen = 0.5
look_duration = 0.5
metadata/_custom_type_script = "uid://b88d4812atpa2"

[node name="Ability_DiveDodgeroll" type="Node3D" parent="AbilityHandler" unique_id=823519099]
script = ExtResource("2_1gtpu")
metadata/_custom_type_script = "uid://bj4limi67x1lj"

[node name="Ability_Slash" type="Node3D" parent="AbilityHandler" unique_id=220516847 node_paths=PackedStringArray("cam", "slash_hit_box")]
script = ExtResource("4_05ndu")
cam = NodePath("../../Camera3DOverhead")
slash_hit_box = NodePath("Slash_Hitbox")
attackCooldown = 1.0
metadata/_custom_type_script = "uid://hmip4a5fhm63"

[node name="Slash_Hitbox" type="Area3D" parent="AbilityHandler/Ability_Slash" unique_id=666915756]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.3407669)

[node name="CollisionShape3D" type="CollisionShape3D" parent="AbilityHandler/Ability_Slash/Slash_Hitbox" unique_id=1659595002]
shape = SubResource("CapsuleShape3D_pxyys")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=1976717246]
shape = SubResource("CapsuleShape3D_5cwa8")

[node name="Camera3DOverhead" type="Camera3D" parent="." unique_id=1628899838 node_paths=PackedStringArray("CameraFocus")]
physics_interpolation_mode = 2
transform = Transform3D(0.70710677, -0.5, 0.50000006, 0, 0.7071068, 0.70710677, -0.7071068, -0.49999997, 0.5, 1.4999999, 2.1213205, 1.5)
top_level = true
current = true
script = ExtResource("2_k87gr")
CameraFocus = NodePath("..")
FocusOffset = Vector3(0, 0, 0)
Zoom = 10.0
Angle_Pitch = 65.0
Angle_Yaw = 45.0
metadata/_custom_type_script = "uid://cwnau2ggxef6s"

[node name="Visual" type="Node3D" parent="." unique_id=1942729588]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Pill" type="MeshInstance3D" parent="Visual" unique_id=431822314]
mesh = SubResource("CapsuleMesh_a5bt4")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Visual/Pill" unique_id=180806981]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.442267, 0.14918077)
visible = false
mesh = SubResource("BoxMesh_jdwmw")

[node name="hoodguy - animations" parent="Visual/Pill" unique_id=1873169002 instance=ExtResource("8_ix2we")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.85, 0)

[node name="Skeleton3D" parent="Visual/Pill/hoodguy - animations/metarig" parent_id_path=PackedInt32Array(1873169002, 2147224495) index="0" unique_id=2059236333]
bones/0/position = Vector3(-4.215566e-18, 0.99091476, 0.021471085)
bones/1/rotation = Quaternion(-0.029455107, 1.19157605e-07, -3.5113221e-09, 0.9995662)
bones/2/rotation = Quaternion(0.026566759, 1.0616508e-14, 6.334008e-09, 0.9996471)
bones/3/rotation = Quaternion(-0.051020104, 2.220446e-16, -1.216414e-08, 0.9986977)
bones/4/rotation = Quaternion(0.12694642, -4.2188475e-15, 3.0266385e-08, 0.9919096)
bones/5/rotation = Quaternion(0.044921078, -1.1908896e-07, 5.3550138e-09, 0.99899054)
bones/6/position = Vector3(0.032179683, 0.1435599, 0.063514754)
bones/6/rotation = Quaternion(-0.56191623, -0.34038275, -0.37209386, 0.655695)
bones/7/position = Vector3(-0.016836526, 0.20204358, -0.013109411)
bones/7/rotation = Quaternion(-0.3869269, 0.57099456, -0.5121003, 0.51186526)
bones/8/rotation = Quaternion(0.05592877, 0.07690512, -0.076673806, 0.99251133)
bones/9/rotation = Quaternion(0.017287014, 0.06597895, -0.04637567, 0.9965928)
bones/10/position = Vector3(-0.032179695, 0.14355989, 0.063514724)
bones/10/rotation = Quaternion(-0.5788067, 0.39079636, 0.33818296, 0.6307879)
bones/11/position = Vector3(0.016836513, 0.20204355, -0.013109566)
bones/11/rotation = Quaternion(-0.23168257, -0.65069145, 0.6228604, 0.36738107)
bones/12/rotation = Quaternion(0.15178782, -0.05374042, 0.07971093, 0.98372686)
bones/13/rotation = Quaternion(-0.036612373, -0.07649163, 0.05062938, 0.9951107)
bones/16/position = Vector3(0.030668411, -0.014620642, -0.022824874)
bones/16/rotation = Quaternion(0.033412166, 0.7738461, 0.4086124, -0.4827854)
bones/17/position = Vector3(-0.030668411, -0.014620642, -0.022824874)
bones/17/rotation = Quaternion(-0.033412166, 0.7738461, 0.4086124, 0.4827854)
bones/18/position = Vector3(0.109356046, 0.002611219, 0.021180496)
bones/18/rotation = Quaternion(0.9875605, 0.07058322, -0.02933039, 0.1374122)
bones/19/rotation = Quaternion(0.07513894, 0.028431082, 0.038220182, 0.9960347)
bones/20/rotation = Quaternion(-0.6616826, -0.018538935, 0.023144715, 0.7491975)
bones/21/rotation = Quaternion(0.04502264, 0.9985756, -0.028391778, 0.0036917464)
bones/22/position = Vector3(-0.109356046, 0.002611219, 0.021180496)
bones/22/rotation = Quaternion(0.9971672, -0.06672554, 0.010267082, -0.033164714)
bones/23/rotation = Quaternion(-0.016707905, -0.014126843, -0.051087998, 0.9984545)
bones/24/rotation = Quaternion(-0.7245796, 0.020536663, -0.020862322, 0.6885691)
bones/25/rotation = Quaternion(-0.045012772, 0.9987314, -0.022310736, -0.0034425298)
bones/26/position = Vector3(0.092649825, -0.028312162, -0.033636995)
bones/26/rotation = Quaternion(0.75279695, 0.42124128, -0.24928506, -0.44012448)
bones/27/position = Vector3(-0.0926498, -0.055676315, -0.061940487)
bones/27/rotation = Quaternion(0.5372851, -0.48349822, 0.07626854, -0.6868315)
bones/28/position = Vector3(0.09630083, -0.015257505, 0.10463674)
bones/28/rotation = Quaternion(0.5710832, 0.48490015, 0.10786154, 0.65353024)
bones/29/position = Vector3(-0.099735945, -0.020556068, 0.053686596)
bones/29/rotation = Quaternion(0.7476287, -0.42585886, -0.24991737, 0.44411367)

[node name="hand_R" parent="Visual/Pill/hoodguy - animations/metarig/Skeleton3D" index="0" unique_id=270273605]
transform = Transform3D(-0.8666504, 0.02461086, 0.49830726, 0.085021585, -0.97688746, 0.19611584, 0.49161702, 0.21233082, 0.8445282, -0.3091978, 0.9581287, 0.12926786)

[node name="hoodguy-rigged" parent="Visual/Pill/hoodguy - animations/metarig/Skeleton3D" index="1" unique_id=1970795229]
material_override = ExtResource("11_bipy8")

[node name="AnimationTree" type="AnimationTree" parent="Visual/Pill/hoodguy - animations" unique_id=1474174721]
tree_root = SubResource("AnimationNodeStateMachine_xw56l")
anim_player = NodePath("../AnimationPlayer")
parameters/BlendTree/MovementBlend/blend_amount = 1.0
parameters/BlendTree/Attack/active = false
parameters/BlendTree/Attack/internal_active = false
parameters/BlendTree/Attack/request = 0
parameters/BlendTree/TimeScale/scale = 2.0

[node name="AnimationTree" type="AnimationTree" parent="Visual" unique_id=1041739086]
libraries/ = SubResource("AnimationLibrary_x7hbx")
tree_root = SubResource("AnimationNodeStateMachine_8v6cl")
parameters/conditions/Dodgeroll = false
parameters/conditions/Grounded = true
parameters/GroundedMovement/WalkBlend/blend_amount = 0.0
parameters/GroundedMovement/WalkSpeed/scale = 1.0
parameters/GroundedMovement/_/scale = 2.0

[node name="PP" type="CanvasLayer" parent="." unique_id=886742788]

[node name="FilmGrain" type="Panel" parent="PP" unique_id=857549796]
material = ExtResource("8_nn7gb")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="UI" parent="." unique_id=387339461 instance=ExtResource("9_6f781")]
visible = false

[node name="AttackCooldown" parent="UI" index="0" unique_id=1866947207 node_paths=PackedStringArray("player")]
player = NodePath("../..")

[node name="UI2" type="CanvasLayer" parent="." unique_id=2033163491]

[node name="UILogic" type="Node" parent="UI2" unique_id=1198643467 node_paths=PackedStringArray("stamina_bars_move", "stamina_bars_attack")]
script = ExtResource("10_gjyvj")
stamina_bars_move = [NodePath("../StaminaMove/BoxContainer/elem1"), NodePath("../StaminaMove/BoxContainer/elem2"), NodePath("../StaminaMove/BoxContainer/elem3")]
stamina_bars_attack = [NodePath("../StaminaAttack/BoxContainer/elem1"), NodePath("../StaminaAttack/BoxContainer/elem2"), NodePath("../StaminaAttack/BoxContainer/elem3")]

[node name="StaminaMove" type="Control" parent="UI2" unique_id=2115397687]
layout_mode = 3
anchor_left = 0.2
anchor_top = 0.75
anchor_right = 0.2
anchor_bottom = 0.75
offset_left = -64.0
offset_top = -256.0
offset_right = 64.0
grow_horizontal = 2
grow_vertical = 2
rotation = -0.1308997
pivot_offset_ratio = Vector2(0.5, 1)

[node name="IconBackground" type="TextureRect" parent="UI2/StaminaMove" unique_id=425053680]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.25
anchor_bottom = 0.25
offset_left = -96.0
offset_top = -64.0
offset_right = 32.0
offset_bottom = 64.0
grow_vertical = 2
texture = ExtResource("10_3tt8b")
expand_mode = 1

[node name="TextureRect" type="TextureRect" parent="UI2/StaminaMove/IconBackground" unique_id=463747397]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.1
anchor_top = 0.1
anchor_right = 0.9
anchor_bottom = 0.9
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_gjyvj")
expand_mode = 1

[node name="Background" type="Panel" parent="UI2/StaminaMove" unique_id=1695273559]
material = SubResource("ShaderMaterial_827r0")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset_ratio = Vector2(0.5, 1)

[node name="BoxContainer" type="BoxContainer" parent="UI2/StaminaMove" unique_id=1574016316]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
vertical = true

[node name="elem1" type="TextureRect" parent="UI2/StaminaMove/BoxContainer" unique_id=293828510]
self_modulate = Color(2.3102762e-06, 0.6945397, 0.44764495, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5

[node name="elem2" type="TextureRect" parent="UI2/StaminaMove/BoxContainer" unique_id=6512545]
self_modulate = Color(2.3102762e-06, 0.6945397, 0.44764495, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5

[node name="elem3" type="TextureRect" parent="UI2/StaminaMove/BoxContainer" unique_id=131308090]
self_modulate = Color(2.3102762e-06, 0.6945397, 0.44764495, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5

[node name="StaminaAttack" type="Control" parent="UI2" unique_id=547200266]
layout_mode = 3
anchor_left = 0.8
anchor_top = 0.75
anchor_right = 0.8
anchor_bottom = 0.75
offset_left = -64.0
offset_top = -256.0
offset_right = 64.0
grow_horizontal = 2
grow_vertical = 2
rotation = 0.1308997
pivot_offset_ratio = Vector2(0.5, 1)

[node name="IconBackground" type="TextureRect" parent="UI2/StaminaAttack" unique_id=421181797]
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_top = 0.25
anchor_right = 1.0
anchor_bottom = 0.25
offset_left = -32.0
offset_top = -64.0
offset_right = 96.0
offset_bottom = 64.0
grow_vertical = 2
texture = ExtResource("10_3tt8b")
expand_mode = 1

[node name="TextureRect" type="TextureRect" parent="UI2/StaminaAttack/IconBackground" unique_id=1321072945]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.1
anchor_top = 0.1
anchor_right = 0.9
anchor_bottom = 0.9
grow_horizontal = 2
grow_vertical = 2
rotation = 0.20071286
pivot_offset_ratio = Vector2(0.5, 0.5)
texture = ExtResource("15_grsr8")
expand_mode = 1

[node name="Background" type="Panel" parent="UI2/StaminaAttack" unique_id=1763135939]
material = SubResource("ShaderMaterial_827r0")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset_ratio = Vector2(0.5, 1)

[node name="BoxContainer" type="BoxContainer" parent="UI2/StaminaAttack" unique_id=387288709]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
vertical = true

[node name="elem1" type="TextureRect" parent="UI2/StaminaAttack/BoxContainer" unique_id=262330263]
self_modulate = Color(0.5921569, 0.48235294, 1, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5
flip_h = true

[node name="elem2" type="TextureRect" parent="UI2/StaminaAttack/BoxContainer" unique_id=411773239]
self_modulate = Color(0.5921569, 0.48235294, 1, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5
flip_h = true

[node name="elem3" type="TextureRect" parent="UI2/StaminaAttack/BoxContainer" unique_id=1612151388]
self_modulate = Color(0.5921569, 0.48235294, 1, 1)
custom_minimum_size = Vector2(0, 72.495)
layout_mode = 2
texture = ExtResource("12_8llf3")
expand_mode = 1
stretch_mode = 5
flip_h = true

[node name="AttackCooldown" type="TextureRect" parent="UI2" unique_id=140004377]
material = SubResource("ShaderMaterial_3ypln")
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.7
anchor_right = 0.5
anchor_bottom = 0.7
offset_left = -128.0
offset_top = -32.0
offset_right = 128.0
offset_bottom = 32.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("18_8v6cl")
expand_mode = 1
script = ExtResource("19_8v6cl")

[connection signal="knockback_requested" from="HealthHandler" to="." method="shove"]
[connection signal="on_attack_fired" from="AbilityHandler/Ability_Slash" to="." method="_on_ability_slash_on_attack_fired"]

[editable path="Visual/Pill/hoodguy - animations"]
[editable path="UI"]
